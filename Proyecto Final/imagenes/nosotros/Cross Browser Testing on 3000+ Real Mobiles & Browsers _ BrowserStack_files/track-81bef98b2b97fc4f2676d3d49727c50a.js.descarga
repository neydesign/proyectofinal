!function(){var e,t,n;VWO.v_t="7.0.350",e=function(){return VWO&&VWO._&&VWO._.libLoaded},t=function(){!function(){var w={TRACK_PAGE_COOKIE_NAME:"_vwo_p",FUNNEL_EXPIRY:100,INITIAL_PRICING_VERSION:0,FEATURE_BUCKET_INDEX:1,SAMPLING_VERSION_INDEX:2,TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX:3,FUNNEL_INFORMATION_INDEX:2,GOAL_INFORMATION_INDEX:3,ANALYZE_INFORMATION_INDEX:4,CRO_START_TIMESTAMP_INDEX:5,PAGE_ID_INFORMATION_INDEX:1,ANALYSE_SERVER_NAME_INDEX:2,TRACK_PAGE_ID_INFORMATION_INDEX:3};function t(){var e=d.getDataStore();e&&((e=e.split(":"))[w.ANALYZE_INFORMATION_INDEX]=function(e){for(var t=a.getKeys(e),n=t.length,i="";n--;)i+=t[n]+"_"+e[t[n]]+(0===n?"":",");return i}(n.analyze),d.setDataStore(e.join(":")))}VWO._.commonUtil.extend(w,VWO._.CookieEnum);var e,a=VWO._.commonUtil,n={analyze:{}},r=0,d={init:function(){var e,t;n.analyze=(t={},(e=d.getDataStore())&&(t=function(e){var t,n,i,a={};if(!e)return a;for(e=e.split(","),r=0;r<e.length;r++)n=(t=e[r].split("_"))[0],i=t[1],a[n]=i;return a}(e.split(":")[w.ANALYZE_INFORMATION_INDEX])),t),window.VWO.data.isUsingSamplingRules&&(n.analyze={})},includeAnalyzeCampaign:function(e){n.analyze[e]="1",t()},excludeAnalyzeCampaign:function(e){n.analyze[e]="0",t()},isAnalyzeCampaignIncluded:function(e){if("1"===n.analyze[e]||1===n.analyze[e])return"1"},isAnalyzeCampaignExcluded:function(e){return"0"===n.analyze[e]||0===n.analyze[e]}};VWO._.commonUtil.extend(d,VWO._.commonCookieHandler);var o,s,_,f,S,V,p,u,l,i,c,A,m,g,T,I,E,O,R,N,v,C,W,k,G,L,F=VWO.TRACK_SESSION_COOKIE_EXPIRY_CUSTOM||1/48,D=VWO.TRACK_GLOBAL_COOKIE_EXPIRY_CUSTOM||window.VWO.data.rp||90;(e={})._vis_opt_test_cookie=0,e._vwo_ds=D,e._vwo_sn=F,e._vwo_referrer=18e-5,e._vwo_uuid=3650,e._vwo_uuid_v2=366,e._vwo_ssm=3650,window.___vwo=1,VWO._.track.loaded||(o=VWO._.utils,s=VWO._.CampaignEnum,_=VWO._.GoalsEnum,f=VWO._.libUtils,S=VWO._.cookies,V=VWO._.EventsEnum,p=VWO._.triggerEvent,u=VWO._.commonUtil,l=VWO._.coreLib,i=VWO._.vwoLib,VWO._.campaign,c=VWO._.listener,A=VWO._.sessionInfoService,m=VWO._.tags,g=VWO._.localStorageService,T=window._vwo_acc_id,I=window._vwo_exp,E=window._vwo_exp_ids,w.FUNNEL_EXPIRY=VWO.FUNNEL_EXPIRY_CUSTOM||100,R={setUp:function(){R.preProcessData()},init:function(){return R.initiated||f.doesUuidCookiesExist()||(S.erase(w.TRACK_SESSION_COOKIE_NAME),S.erase(w.TRACK_GLOBAL_COOKIE_NAME)),R.expireGlobalCookie(),R.expireGoals(),R.createGlobalCookieReturnEligibility()?(R.isUserBucketed()?R.startSession():p(V.RECORDING_NOT_ELIGIBLE,"USER_NOT_BUCKETED"),R.expireFunnels(u.getServerStartTimestamp(!0)),d.init(),R.initiated=!0,!(R.visitorRetracked=!1)):(p(V.RECORDING_NOT_ELIGIBLE,"URL_NOT_MATCHING"),!1)},preProcessData:function(){VWO.data.url=VWO.data.url||{},VWO.data.url.i=VWO.data.url.i||".*"},isUserEligible:function(){return l.compareUrlWithIncludeExcludeRegex(l.getCurrentUrl(),VWO.data.url.i,VWO.data.url.e).didMatch},expireGlobalCookie:function(){R.shouldExpireGlobalCookie()&&(S.erase(w.TRACK_GLOBAL_COOKIE_NAME),S.erase(w.TRACK_SESSION_COOKIE_NAME))},getLatestSamplingVersion:function(){return window.VWO.data.pvn||w.INITIAL_PRICING_VERSION},getCpt:function(){return window.VWO.data.cpt||0},updateTrackPageId:function(){var e=R.getTrackPageId()+1;return R.markTrackPageId(e),e},getTrackPageId:function(){var e=A.getSNCookieValueByIndex(w.TRACK_PAGE_ID_INFORMATION_INDEX);return e?parseInt(e,10):0},markTrackPageId:function(e){A.setSNCookieValueByIndex(w.TRACK_PAGE_ID_INFORMATION_INDEX,e)},getCroStartTimestamp:function(){return d.getDataInfoByIndex(w.CRO_START_TIMESTAMP_INDEX)},setCroStartTimestamp:function(){var e=u.getCurrentTimestamp(!0)-A.getFirstSessionId();d.setDataInfoByIndex(w.CRO_START_TIMESTAMP_INDEX,e)},shouldExpireGlobalCookie:function(){var e=d.getDataStore(),t=d.getMetaInfoByIndex(w.TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX);if(e){var n=u.getServerStartTimestamp(!0),i=A.getFirstSessionId(),a=R.getCroStartTimestamp();if(24*w.TRACK_GLOBAL_COOKIE_EXPIRY*60*60+a+i<n)return!A.getSessionStore()||(t||d.setMetaInfoByIndex(w.TRACK_GLOBAL_COOKIE_EXPIRY_STATE_INDEX,1),!1);if(i<R.getCpt())return!0;var r=R.getLatestSamplingVersion(),o=d.getMetaInfoByIndex(w.SAMPLING_VERSION_INDEX)||w.INITIAL_PRICING_VERSION;if(!(o<r)&&Math.abs(o)<Math.abs(r)&&R.isUserBucketed())return!0}return!1},_markFunnelValue:function(e,t,n){this._markFeatureValue(w.FUNNEL_INFORMATION_INDEX,e,[t,n,A.getRelativeSessionId(),I[e].v])},_isFunnelValue:function(e,t,n){return this._isFeatureValue(w.FUNNEL_INFORMATION_INDEX,e,[t,n])},expireFunnels:function(e){var t,n,i,a,r,o,s=d.getDataStore(),_=A.getFirstSessionId();if(s){for(n=(t=(s=s.split(":"))[w.FUNNEL_INFORMATION_INDEX].split(",")).length;n--;)a=(i=t[n].split("_"))[0],r=+i[3]+24*w.FUNNEL_EXPIRY*60*60+_,o=+i[4],(r<e||I[a]&&I[a].v>o)&&t.splice(n,1);s[w.FUNNEL_INFORMATION_INDEX]=t.join(","),s=s.join(":"),d.setDataStore(s)}},expireGoals:function(){A.getSessionStore()&&R.getTrackPageId()&&!R.visitorRetracked||d.deleteDataStoreInfoByIndex(w.GOAL_INFORMATION_INDEX)},getSessionIdOfFunnel:function(e){var t=d.getDataStore().match(new RegExp("[:,]"+e+"_[^_]*_._([^_]*)_[^,:]*"));return t&&t[1]?+t[1]+A.getFirstSessionId():0},_markFeatureValue:function(e,t,n,i){var a=i?d.getMetaStore():d.getDataStore(),r=a.split(":"),o=t,s=r[e],_=r.length;if(!s)for(;_<=e;)r[_]="",_++;var u=(s=r[e]).match(new RegExp("(?:^|,)("+t+"_[^,]+)"));void 0===n&&(n=[]),n instanceof Array||(n=[n]);for(var l=0;l<n.length;l++)o+="_"+n[l];r[e]=u?r[e].replace(new RegExp("(^|,)("+t+"_[^,]+)"),"$1"+o):r[e]+(0===r[e].length?"":",")+o,a=r.join(":"),i?d.setMetaStore(a):d.setDataStore(a)},_isFeatureValue:function(e,t,n,i){var a,r,o=(i?d.getMetaStore():d.getDataStore()).split(":")[e];return void 0===n&&(n=[]),n instanceof Array||(n=[n]),!!(e===w.FUNNEL_INFORMATION_INDEX?(r=n[1],a=(a=n[0])||"[^_]*",r=null==r?".":r,new RegExp("(,|^)"+t+"_"+a+"_"+r)):(r=null==(r=n[0])?".":r,new RegExp("(,|^)"+t+"_"+r))).test(o)&&"1"},_markGoalValue:function(e,t){this._markFeatureValue(w.GOAL_INFORMATION_INDEX,e,t)},_isGoalValue:function(e,t){return this._isFeatureValue(w.GOAL_INFORMATION_INDEX,e,t)},isCroEnabled:function(){if(!S.get(w.TRACK_GLOBAL_COOKIE_NAME))return!1;var e=d.getMetaStore().split(":")||[];return!(!e[w.FEATURE_BUCKET_INDEX]&&!e[w.SAMPLING_VERSION_INDEX])||void 0},createGlobalCookieReturnEligibility:function(){if(!R.isCroEnabled()){if(!R.isUserEligible())return!1;S.get(w.TRACK_GLOBAL_COOKIE_NAME)||(f.createUUIDCookie(),A.createGlobalCookie()),R.setCroStartTimestamp()}return R.markFeatureLevelBucketing(),R.setSamplingVersion(),!0},markFeatureLevelBucketing:function(){var e=window.VWO.data.pc.sampleData,t=e&&e[0];if(e)for(var n=1;n<e.length;n++)e[n].priority<t.priority&&(t=e[n]);delete VWO.data.pc.sampleData;var i=A.getPcTraffic(),a=window._vwo_pc_custom||window.VWO.data.pc,r=u.getKeys(a),o=r.length,s=!1;for(!window._vwo_pc_custom&&-1!==window.VWO.data.pc.a&&t&&(-2!==t.samplingRate&&(a.a=t.samplingRate,a.t=t.samplingRate,window.VWO.data.isUsingSamplingRules=!0),s=!R.isUserBucketed()&&0<e.length);o--;)R._isFeatureValue(w.FEATURE_BUCKET_INDEX,r[o],null,1)&&!VWO.data.eFSFI&&!s||R._markFeatureValue(w.FEATURE_BUCKET_INDEX,r[o],+(i<a[r[o]]),!0)},setSamplingVersion:function(){d.setMetaInfoByIndex(w.SAMPLING_VERSION_INDEX,R.getLatestSamplingVersion())},isUserBucketed:function(){for(var e=window.VWO.data.pc,t=u.getKeys(e),n=t.length;n--;)if(R.isFeatureBucketed(t[n]))return!0},isFeatureBucketed:function(e){return!e||R._isFeatureValue(w.FEATURE_BUCKET_INDEX,e,1,!0)},excludeFunnel:function(e){R._markFunnelValue(e,0,0)},includeFunnel:function(e){R._markFunnelValue(e,0,1)},includeAnalyzeCampaign:function(e){d.includeAnalyzeCampaign(e)},excludeAnalyzeCampaign:function(e){d.excludeAnalyzeCampaign(e)},excludeGoal:function(e){R._markGoalValue(e,0)},includeGoal:function(e){R._markGoalValue(e,1)},shouldAddGoalInFunnel:function(e,t){t=parseInt(t,10);var n,i=R.getGoalIndexInFunnel(e,t);if(i<0)return!1;for(var a,r,o,s=I[e].g[0].id===t,_=d.getDataStore().split(":")[w.FUNNEL_INFORMATION_INDEX].split(","),u=_.length;u--;)if((a=_[u].split("_"))[0]===e){if(o=!0,r=+a[1],!+a[2])return!1;n=R.getGoalIndexInFunnel(e,r)+1===i}return s&&!o&&(l.runCampaigns({keepElementLoadedRunning:!1,expIds:[e],isManual:!0},null,null,!0),R.isFunnelIncluded(e)&&(n=!0)),n},getGoalIndexInFunnel:function(e,t){for(var n=0;n<I[e].g.length;n++)if(I[e].g[n].id===t)return n;return-1},getGoalsString:function(e){for(var t="",n=0;n<e.length;n++)t=t+e[n].id+("REVENUE_TRACKING"===e[n].type?"_1":"")+(n===e.length-1?"":",");return t},getGtAndF:function(e){for(var t,n,i=E.length,a={};i--;)t=E[i],I[t].type===s.FUNNEL_CAMPAIGN&&this.shouldAddGoalInFunnel(t,e)&&(R._markFunnelValue(t,e,1),a[t]=this.getGoalsString(I[t].g)+":"+R.getSessionIdOfFunnel(t));return n=u.getKeys(a),"&gt="+ +!R.isGoalTriggered(e)+"_"+n.join(",")+"&f="+o.jsonStringify(a)},startSession:function(){var e,t,n,i,a,r,o,s,_,u,l,d=document.URL,c="s.gif?account_id="+T+f.getUUIDString(f.createUUIDCookie()),g=1;if(A.isSessionInfoSynced()){A.updateAndSyncPageId(),r=R.updateTrackPageId(),e=m.getTags(),t=m.getEgTags();try{o=6==window._vwo_acc_id&&e?JSON.parse(e).si&&Object.keys(JSON.parse(e).si).length:void 0}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:"Issue with tagValue",url:"track-lib.ts",lineno:667,colno:5,source:JSON.stringify({tagValue:e,lt:(new Date).getTime(),referrer:document.referrer})})}if(a=A.getSessionId(),g=VWO._.pageId,i=a>A.getFirstSessionId(),c=c+"&s="+a+"&p="+g,!window._vis_debug&&(f.sendCall(c+(e?"&tags="+e:"")+(t?"&eg="+t:"")+(o?"&tagsLength="+o:"")+(6==window._vwo_acc_id&&window.VWO.isSafari?"&isSafari="+window.VWO.isSafari:"")+"&update=1&cq=1"),6==window._vwo_acc_id)){s=m.getTags(!0);try{_=6==window._vwo_acc_id&&s?JSON.parse(s).si&&Object.keys(JSON.parse(s).si).length:void 0}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:"Issue with tagValue",url:"track-lib.ts",lineno:667,colno:5,source:JSON.stringify({tagValue:e,lt:(new Date).getTime(),referrer:document.referrer})})}s&&f.sendCall(c+(e?"&tags="+s:"")+(o?"&tagsLength="+_:"")+(6==window._vwo_acc_id&&window.VWO.isSafari?"&isSafari="+window.VWO.isSafari:"")+"&pageExitListener="+(window.VWO&&window.VWO.pageExitListener)+"&batch=true&fromTrack=true&update=1&cq=1")}}else{g=1,m.refresh(),e=m.getTags(),t=m.getEgTags();try{o=6==window._vwo_acc_id&&e?JSON.parse(e).si&&Object.keys(JSON.parse(e).si).length:void 0}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:"Issue with tagValue",url:"track-lib.ts",lineno:667,colno:5,source:JSON.stringify({tagValue:e,lt:(new Date).getTime(),referrer:document.referrer})})}if(A.getSessionStore()?(A.updateAndSyncPageId(),g=VWO._.pageId,A.setSNCookieValueByIndex(w.SESSION_SYNCED_STATE_INDEX,1)):(n=A.getRelativeSessionTimestamp(this),A.initializeSession(n+":"+g+":::1"),VWO._.pageId=g),r=R.updateTrackPageId(),c=c+"&s="+(a=A.getSessionId())+"&p="+g,i=a>A.getFirstSessionId(),!window._vis_debug){var I,E=f.extraData(!0),O=encodeURIComponent(E),N=c+"&ed="+O+"&cu="+encodeURIComponent(A.getInfo().cu||d)+(e?"&tags="+e:"")+(t?"&eg="+t:"")+(o?"&tagsLength="+o:"")+"&r="+ +i+(6==window._vwo_acc_id&&window.VWO.isSafari?"&isSafari="+window.VWO.isSafari:"")+"&cq=1";if(f.sendCall(N),6==window._vwo_acc_id){s=m.getTags(!0);try{_=6==window._vwo_acc_id&&s?JSON.parse(s).si&&Object.keys(JSON.parse(s).si).length:void 0}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:"Issue with tagValue",url:"track-lib.ts",lineno:667,colno:5,source:JSON.stringify({tagValue:e,lt:(new Date).getTime(),referrer:document.referrer})})}s&&(I=c+"&ed="+O+"&cu="+encodeURIComponent(A.getInfo().cu||d)+(e?"&tags="+s:"")+(o?"&tagsLength="+_:"")+"&r="+ +i+(6==window._vwo_acc_id&&window.VWO.isSafari?"&isSafari="+window.VWO.isSafari:"")+"&pageExitListener="+(window.VWO&&window.VWO.pageExitListener)+"&batch=true&fromTrack=true&cq=1",f.sendCall(I))}try{JSON.parse(decodeURIComponent(O)).lt}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:"extraData(ed) is not a JSON string [while sending call for 's.gif']",url:"track-lib.ts",lineno:688,colno:5,source:JSON.stringify({extraData:E,lt:(new Date).getTime(),referrer:document.referrer,requestURL:N})})}}}(isNaN(a)||isNaN(g))&&window.VWO._.customError&&(u={_vwo_sn:S.get("_vwo_sn"),_vwo_ds:S.get("_vwo_ds")},l="Error while sending s.gif: ",isNaN(a)&&(l+="Session Id is NaN"),isNaN(g)&&(l=l?l+", ":l,l+="Page Id is NaN",u.pageId=g),window.VWO._.customError({msg:l,url:"track-lib.ts",source:JSON.stringify(u),lineno:640,colno:641})),A.setVisitorInformation(),R.setAnalyzeServerName(),p(V.TRACK_SESSION_CREATED,a,g,i,1===r,r),A.updateSession()},setAnalyzeServerName:function(){var e=A.getSNCookieValueByIndex(w.ANALYSE_SERVER_NAME_INDEX);e?window.VWO.data.asn=e:(window.VWO.data.as&&A.setSNCookieValueByIndex(w.ANALYSE_SERVER_NAME_INDEX,window.VWO.data.as),window.VWO.data.asn=window.VWO.data.as||"dev.visualwebsiteoptimizer.com")},isGoalIncluded:function(e){return this._isGoalValue(e,1)||this._isGoalValue(e,2)},isGoalExcluded:function(e){return this._isGoalValue(e,0)},isAnalyzeCampaignExcluded:function(e){return d.isAnalyzeCampaignExcluded(e)},isAnalyzeCampaignIncluded:function(e){return d.isAnalyzeCampaignIncluded(e)},isFunnelIncluded:function(e){return R._isFunnelValue(e,void 0,1)},isFunnelExcluded:function(e){return R._isFunnelValue(e,void 0,0)},markGoalTriggered:function(e,t){var n=I[e].goals[t];R._markGoalValue(t,2),n.type===_.SEPARATE_PAGE&&(n.pageVisited=1)},isGoalTriggered:function(e){return R._isGoalValue(e,2)},shouldTriggerGoal:function(e,t){var n=I[e].goals[t],i=!1;if(R._isGoalValue(t,0))return!1;if(R._isGoalValue(t,1)&&(i=!n.pageVisited),R._isGoalValue(t,2)&&(i=!1),!n.pageVisited&&!i)for(var a,r=E.length;r--;)a=E[r],I[a].type===s.FUNNEL_CAMPAIGN&&this.shouldAddGoalInFunnel(a,t)&&(i=!0);return n.type===_.SEPARATE_PAGE&&(n.pageVisited=!0),i},loaded:!(O=!1),initiated:!1},u.extend(VWO._.track,R),R=VWO._.track,N=function(){3===VWO.data.tcVersion&&!k||(R.setUp(),R.init()&&l.runCampaigns({keepElementLoadedRunning:!1,expIds:u.filter(E,function(e){return f.isSessionBasedCampaign(e)}),isManual:!1},null,null,!0))},v=function(){VWO._.ac&&VWO._.ac.cInstJS?VWO._.addConsentTrigger(N):N()},C=function(){try{var e="_vwo_track_data_"+window._vwo_acc_id,t=g.get(e);if(t)for(var n=o.jsonParse(t),i=Object.keys(n),a=i.length;a--;)window.VWO.push([n[i[a]][0],n[i[a]][1]]);g.remove(e)}catch(e){var r="[JSLIB_TRACK] Error - Check for persisited track data.";window.VWO._.customError&&window.VWO._.customError({msg:r,url:"track-lib.ts",source:encodeURIComponent(r)})}},W=function(){(3!==VWO.data.tcVersion||k)&&G&&(R.initiated||(C(),v(),i.init("track")&&(R.vwoLibInitiated=!0)))},L=function(){R.visitorRetracked=!0,R.init(),l.runCampaigns(!1,u.filter(E,function(t){try{window._vwo_exp[t].combination_chosen}catch(e){window.VWO._.customError&&window.VWO._.customError({msg:"LOGGING: experiment id "+t+"not found in "+window._vwo_exp_ids,url:"track-lib.ts",lineno:879,colno:9})}return window._vwo_exp&&window._vwo_exp[t]?f.isSessionBasedCampaign(t)&&(window._vwo_exp[t].combination_chosen=void 0,1):f.isSessionBasedCampaign(t)}),null,!0),R.visitorRetracked=!1},c.onEventReceive(V.RETRACK_VISITOR,function(){VWO._.ac&&VWO._.ac.cInstJS?VWO._.addConsentTrigger(L):L()}),c.onEventReceive(V.NEW_SESSION_CREATED,function(){R.visitorRetracked=!0}),c.onEventReceive(V.POST_URL_CHANGE,function(){O=!0,VWO.phoenix||(v(),R.vwoLibInitiated||(C(),i.init("track")))}),c.onEventReceive(V.AFTER_SAMPLING_TRIGGER,function(){O&&(v(),R.vwoLibInitiated||(C(),i.init("track")),O=!1)}),c.onEventReceive(V.NOT_REDIRECTING,function(){G||(G=!0,W())}),c.onEventReceive(V.UPDATE_SETTINGS_CALL,function(){k||(k=!0,W())}))}()},(n=function(){e()?t():setTimeout(n,100)})()}();
